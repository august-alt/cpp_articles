[источник](https://docs.microsoft.com/en-us/cpp/cpp/declarations-and-definitions-cpp?view=msvc-170)

# Объявления и реализации

Программа на C++ состоит из разных сущностей, таких как переменные, функции, типы и пространства имен. Каждая из этих сущностей должна быть объявлена перед использованием. В объявлении указывается уникальное имя для сущности, информация о ее типе и другие характеристики. В C++ точка, где имя объявляется, явялется точной, где оно становится видимым для компилятора. Вы не можете ссылаться на функцию или класс, которые объявлены в более поздней точке, во время компиляции. Переменные должны быть объявлены как можно ближе к точке, где будут использованы.

Ниже пример, показывающий некоторые объявления:

~~~
#include <string>

int f(int i); // forward declaration

int main()
{
    const double pi = 3.14; //OK
    int i = f(2); //OK. f is forward-declared
    C obj; // error! C not yet declared.
    std::string str; // OK std::string is declared in <string> header
    j = 0; // error! No type specified.
    auto k = 0; // OK. type inferred as int by compiler.
}

int f(int i)
{
    return i + 42;
}

namespace N {
   class C{/*...*/};
}
~~~

В строке 5 объявляется функция main. В строке 7, переменная константа с именем pi объявляется и инициализируется. В строке 8, целочисленная переменная i объявляется и инициализируется значением, вычысляемым функцией f. Имя f видимо компилятором, так как было объявлено заранее в строке 3.

В строке 9 объявляется переменная с именем obj и типом c. Однако, это объявление вызывает ошибку, посколько с объявлена позже, и не объявлена заранее. Чтобы исправить ошибку, вы можете либо переместить все объявление перед функцией main или добавить объявление заранее. Это поведение отличается от других языков, например c#. В тех языках, функции и классы могут быть использованы перед их объявлением в файле исходного кода.

В строке 10, обяъвляется переменная с именем str типа  std::string. Имя std::string видимо, потому что, оно объявлено в заголовочном файле string, который копируется в исходный файл начиная со строки 1. std - это пространство имен, в котором объявлен класс string.

В строке 11, возникает ошибка, потому что имя j еще не объявлено. Объявление должно предоставлять тип, в отличие от других языков, тиках как JavaScript. В строке 12, используется ключевое слово auto, которое говорить компилятору вывести тип переменной k на основе значения, которым ее инициализируют. В нашем случае, компилатор выберет тип int.

## Область объявления

Имя, которое которое указано в объявлении, видимо только в области, где оно было создано. В предыдущем примере, переменные, которые были объявлены в функции main - локальные. Вам необходимо объявлять другую переменную с именем i вне функции main, в глобальной области видимости, и она будет отдельной сущностью. Однако, такое дублирование имен моежт привести программиста к путанице и ошибкам, и этого надо избегать. В строке 21, класс C объявляется в области видимости N. Используйте области видимости для избегания конфликтов имен. Большая часть имен стандартной библиотеки C++ объявлены в пространстве имен std. Для получения более подробной информации о правилах пространств имен и объявлениям, смотрите [scope](https://docs.microsoft.com/en-us/cpp/cpp/scope-visual-cpp?view=msvc-170).

## Определения

Некоторые сущности, включая функции, класс, перечисления и переменные-константы, должны быть определены так же как и объявлены.
Определение предоставляет компилатору всю необходимую информацию для генерации машинного кода, когда сущность будет использована в программе. В предыдущем примере, строка 3 содержит объявление функции f, но ее определение предоставлено в строках с 15 по 18. В строке 21, класс c сразу объявляется и определяется. (просто объявление класса ничего не делает). Переменная-константа должна быть сразу определена, другими словами - получить значение в том же выражении, в котором она объявлена. Объявление встроенного типа, такого как int, это автоматическое определение, потому что, компилятор знает, сколько места для нее надо выделить. 

Следущий пример показывает нам объявлания и определения:

~~~
// Declare and define int variables i and j.
int i;
int j = 10;

// Declare enumeration suits.
enum suits { Spades = 1, Clubs, Hearts, Diamonds };

// Declare class CheckBox.
class CheckBox : public Control
{
public:
    Boolean IsChecked();
    virtual int     ChangeState() = 0;
};
~~~

Здесь несколько  объявлений, но нет определений.

~~~
extern int i;
char *strchr( const char *Str, const char Target );
~~~

## Выражения Typedef и using

В старых версиях C++, ключевое слово typedef использовалось для объявления нового имени, которое являлось псевдонимом другого имени. Например, тип std::string - другое имя std::basix_string<char>. Это должно быть очевидно, почему программисты используют имя, обозначенное с помощью typedef, чем настоящее имя. В современном C++, использование ключевого слова using предпочтительнее, чем использование typedef, но идея та же самая, новое имя объявляется для сущности, которая уже объявлена и определена.

## Статические члены класса

Статические члены класса - это отдельные переменные, которые разделены между всеми объектами класса. Из-за того, что они общие для всех объектов, они должны быть определены и проинициализированы вне определения класса. Для получения более подробной информации, смотрите [Classes](https://docs.microsoft.com/en-us/cpp/cpp/classes-and-structs-cpp?view=msvc-170).

## Объявления extern

C++ программа может содержать более одной единицы компиляции. Чтобы объявить сущность, определение которой отделено от единицы компиляции, используйте ключевое слово extern. Информации об объявлении достаточно компилятору. Однако, если определение сущности не найдено во время линковки, компоновщик покажет ошибку.

